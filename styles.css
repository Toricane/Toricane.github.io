/* NEW SITE STYLES */
html {
    scroll-behavior: smooth;
    overflow-x: hidden;
}

* {
    box-sizing: border-box;
}

body {
    margin: 0;
    font-family: 'Poppins', system-ui, -apple-system, sans-serif;
    background: var(--bg);
    color: var(--text);
    -webkit-font-smoothing: antialiased;
    overflow-x: hidden;
    /* Mobile performance optimizations */
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    -webkit-text-size-adjust: 100%;
}

img {
    max-width: 100%;
    display: block;
}

.skip-link {
    position: absolute;
    left: -999px;
    top: auto;
    width: 1px;
    height: 1px;
    overflow: hidden;
}

.skip-link:focus {
    left: 1rem;
    top: 1rem;
    width: auto;
    height: auto;
    padding: .6rem 1rem;
    background: var(--panel);
    color: var(--text);
    border-radius: 8px;
    z-index: 1000;
    border: 1px solid var(--panel-edge);
}

/* Color tokens */
:root {
    --bg: #060809;
    --bg-alt: #0f151a;
    --panel: #121d25;
    --panel-edge: #1e2d37;
    --text: #d8e3ec;
    --text-dim: #8aa0af;
    --accent: #4db5ff;
    --accent-glow: 219 100% 60%;
    --radius: 18px;
    --transition: 150ms cubic-bezier(.4, .2, .2, 1);
    --border-light: rgba(255, 255, 255, 0.06);
    --shadow-dark: rgba(0, 0, 0, 0.4);
    --border-accent: rgba(77, 181, 255, 0.6);
    --shadow-light: rgba(255, 255, 255, 0.02);
    --shadow-dark-strong: rgba(0, 0, 0, 0.6);
    --shadow-dark-extra: rgba(0, 0, 0, 0.7);
    --shadow-widget: rgba(0, 0, 0, 0.15);
    --scroll-bg: #141f27;
    --scroll-bg-hover: #1d2b34;
    --connections-gradient: linear-gradient(145deg, #101a21, #0c1216);
    --footer-color: #6f8696;
    --dark-accent: #22333f;
    --timeline-gradient: linear-gradient(to bottom, #22333f, #4db5ff25, #22333f);
}

/* Light mode colors */
[data-theme="light"] {
    --bg: #faf0e6;
    --bg-alt: #f5f5dc;
    --panel: #e6e6e6;
    --panel-edge: #cccccc;
    --text: #2c2c2c;
    --text-dim: #666666;
    --accent: #4db5ff;
    --accent-glow: 219 100% 60%;
    --border-light: rgba(0, 0, 0, 0.06);
    --shadow-dark: rgba(0, 0, 0, 0.15);
    --border-accent: rgba(77, 181, 255, 0.8);
    --shadow-light: rgba(0, 0, 0, 0.02);
    --shadow-dark-strong: rgba(0, 0, 0, 0.3);
    --shadow-dark-extra: rgba(0, 0, 0, 0.4);
    --shadow-widget: rgba(0, 0, 0, 0.08);
    --scroll-bg: #e0e0e0;
    --scroll-bg-hover: #d0d0d0;
    --connections-gradient: linear-gradient(145deg, #f0f0f0, #e8e8e8);
    --footer-color: #888888;
    --dark-accent: #cccccc;
    --timeline-gradient: linear-gradient(to bottom, #cccccc, #4db5ff25, #cccccc);
}

/* Hero */
#hero {
    min-height: 100dvh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: clamp(1.5rem, 3vw, 3.5rem);
}

.card-images {
    display: flex;
    gap: 8px;
    margin: 0.75rem 0;
}

.card-thumb {
    width: 72px;
    height: 56px;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-color: var(--panel);
    border-radius: 8px;
    border: 1px solid var(--border-light);
    box-shadow: 0 2px 8px var(--shadow-dark);
    padding: 0;
    cursor: pointer;
}

.card-thumb:focus {
    outline: 2px solid var(--border-accent);
}

.hero-inner {
    width: 100%;
    max-width: 1400px;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(320px, 100%), 1fr));
    gap: clamp(2rem, 4vw, 4rem);
    align-items: start;
}

.intro-col {
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
    width: 100%;
    min-width: 0;
}

.site-title {
    font-size: clamp(1.8rem, 4.5vw, 3.5rem);
    line-height: 1.05;
    margin: 0;
    font-weight: 700;
    letter-spacing: -1px;
    padding-bottom: 0.2em;
}

/* Title gradient shine (replaces separate last-name color) */
.site-title {
    position: relative;
    /* Softer light-blue to lighter accent gradient */
    /* Lightest blue (was white): #e2f4ff; softened accent: #79caff */
    background: linear-gradient(100deg, #e2f4ff 0%, #e2f4ff 15%, #79caff 55%, #79caff 70%, #e2f4ff 100%);
    background-size: 200% 100%;
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    -webkit-text-fill-color: transparent;
    /* Safari */
    animation: titleGradient 10s ease-in-out infinite;
}

/* Light mode title gradient */
[data-theme="light"] .site-title {
    background: linear-gradient(100deg, #1a4f7a 0%, #1a4f7a 15%, #4db5ff 55%, #4db5ff 70%, #1a4f7a 100%);
    background-size: 200% 100%;
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    -webkit-text-fill-color: transparent;
}

/* Ensure span inherits gradient */
.last-name {
    color: inherit;
}

@keyframes titleGradient {
    0% {
        background-position: 200% 50%;
    }

    50% {
        background-position: 100% 50%;
    }

    100% {
        background-position: 0% 50%;
    }
}

@media (prefers-reduced-motion: reduce) {
    .site-title {
        animation: none;
        background-position: 50% 50%;
    }
}

.tagline {
    max-width: 100%;
    font-size: clamp(.95rem, 1.1vw, 1.05rem);
    line-height: 1.5;
    margin: 0;
    margin-top: -0.2em;
    color: var(--text-dim);
}

/* --- Tagline Links & Footnotes ---------------------------------------------- */
.tagline a {
    color: var(--text);
    font-weight: 500;
    text-decoration: none;
    transition: var(--transition);
    border-bottom: 1px solid rgba(77, 181, 255, 0.25);
}

.tagline a:hover, .tagline a:focus-visible {
    background-color: rgba(77, 181, 255, 0.1);
    color: #a9d9ff;
    border-bottom-color: rgba(77, 181, 255, 0.5);
}

.footnote {
    position: relative;
    display: inline-block;
    cursor: help;
}

.footnote-content {
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    margin-bottom: 12px;
    /* space for arrow */
    background-color: var(--panel);
    border: 1px solid var(--panel-edge);
    border-radius: 12px;
    padding: .8rem 1rem;
    width: max-content;
    max-width: min(320px, calc(100vw - 2rem));
    font-size: .8rem;
    line-height: 1.5;
    color: var(--text-dim);
    z-index: 10;
    opacity: 0;
    visibility: hidden;
    transition: opacity .2s, visibility .2s, transform .2s;
    box-shadow: 0 10px 30px -10px var(--shadow-dark-strong);
    text-align: left;
}

.footnote.active .footnote-content {
    opacity: 1;
    visibility: visible;
    transform: translateX(-50%) translateY(-5px);
}

/* Arrow for footnote */
.footnote-content::after {
    content: '';
    position: absolute;
    left: 50%;
    top: 100%;
    transform: translateX(-50%);
    border-width: 6px;
    border-style: solid;
    border-color: var(--panel) transparent transparent transparent;
}

.footnote.flipped .footnote-content {
    bottom: auto;
    top: 100%;
    margin-bottom: 0;
    margin-top: 12px;
}

.footnote.flipped .footnote-content::after {
    top: auto;
    bottom: 100%;
    border-color: transparent transparent var(--panel) transparent;
}

.footnote sup {
    font-size: .7em;
    vertical-align: super;
    margin-left: -0.1em;
    /* Pulls it back to counter formatter whitespace */
    color: var(--text-dim);
    font-weight: 600;
}

/* Connections pill */
.connections {
    background: var(--connections-gradient);
    border: 1px solid var(--panel-edge);
    padding: .9rem 1rem;
    border-radius: 1000px;
    box-shadow: 0 0 0 1px var(--shadow-light), 0 8px 24px -12px var(--shadow-dark-strong);
    overflow: hidden;
    width: 100%;
    max-width: 100%;
}

.connections ul {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    flex-wrap: wrap;
    gap: .35rem;
    justify-content: center;
}

.connections a {
    --pill-bg: #1a2730;
    display: inline-flex;
    align-items: center;
    gap: .45rem;
    font-size: .75rem;
    font-weight: 500;
    text-decoration: none;
    color: var(--text-dim);
    padding: .45rem .75rem;
    background: var(--pill-bg);
    border: 1px solid var(--dark-accent);
    border-radius: 1000px;
    position: relative;
    transition: var(--transition);
}

/* Light mode connection pills */
[data-theme="light"] .connections a {
    --pill-bg: #e8e8e8;
}

.connections a:hover, .connections a:focus-visible {
    color: var(--text);
    background: var(--dark-accent);
    border-color: var(--panel-edge);
}

.connections svg {
    width: 14px;
    height: 14px;
    fill: currentColor;
}

.connections .sparkle {
    position: absolute;
    inset: 0;
    pointer-events: none;
    mix-blend-mode: plus-lighter;
    opacity: .6;
}

/* Portrait & side widgets */
.media-col {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
}

/* Cover Flow Styles - Infinite Carousel */
.coverflow-container {
    margin: 0;
    position: relative;
    isolation: isolate;
    /* Fill the column, but don't exceed a comfortable max */
    width: 100%;
    max-width: 820px;
    height: clamp(260px, 40vw, 350px);
    overflow: hidden;
    /* Mobile performance optimization */
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
    display: flex;
    align-items: center;
}

/* Subtle edge fade overlays */
.coverflow-container::before,
.coverflow-container::after {
    content: "";
    position: absolute;
    top: 0;
    bottom: 0;
    width: clamp(16px, 4vw, 56px);
    pointer-events: none;
    z-index: 2;
}

.coverflow-container::before {
    left: 0;
    background: linear-gradient(to right, var(--bg) 0%, transparent 100%);
}

.coverflow-container::after {
    right: 0;
    background: linear-gradient(to left, var(--bg) 0%, transparent 100%);
}

.coverflow-cards {
    display: flex;
    /* Track should size to its content so translating -50% aligns perfectly */
    width: max-content;
    height: 100%;
    /* Prevent text selection during interaction */
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    will-change: transform;
    animation: carousel-marquee 22s linear infinite;
}

.coverflow-group {
    display: flex;
    gap: 20px;
    padding-right: 20px;
    /* Gap between last and first card */
    flex: 0 0 auto;
    align-items: center;
}

/* Pause animation on hover */
.coverflow-container:hover .coverflow-cards {
    animation-play-state: paused;
}

/* Seamless infinite scroll animation: move the full track (two identical groups) by 50% */
@keyframes carousel-marquee {
    0% {
        transform: translate3d(0, 0, 0);
    }

    100% {
        transform: translate3d(-50%, 0, 0);
    }
}

.coverflow-card {
    width: 200px;
    height: 280px;
    /* Fixed height for all cards */
    flex-shrink: 0;
    perspective: 1000px;
    cursor: default;
    position: relative;
    transition: none;
}


.coverflow-card img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: calc(var(--radius) * 1.2);
    border: 2px solid #1f2c35;
    box-shadow: 0 10px 40px -20px #000;
    /* No extra filters to avoid color shifts */
    filter: none;
    /* Mobile performance optimization */
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
    backface-visibility: hidden;
    transition: none;
}


/* Mobile and tablet responsiveness */
@media (max-width: 768px) {
    .coverflow-container {
        width: 100%;
        height: clamp(200px, 60vw, 260px);
    }

    .coverflow-card {
        width: 160px;
        height: 200px;
    }

    .coverflow-group {
        gap: 15px;
        padding-right: 15px;
    }
}

/* Links popup chooser (for items with multiple links) */
.links-popup {
    position: fixed;
    z-index: 1200;
    background: var(--panel);
    border: 1px solid var(--panel-edge);
    border-radius: 10px;
    padding: 6px;
    box-shadow: 0 12px 40px -12px var(--shadow-dark-extra), 0 4px 18px var(--shadow-dark-strong);
    min-width: 200px;
    max-width: min(90vw, 420px);
}

.links-popup-list {
    list-style: none;
    margin: 0;
    padding: 0;
    /* Cap popup height to avoid overflowing viewport; enable internal scrolling */
    max-height: min(55vh, 480px);
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
}

.links-popup-list::-webkit-scrollbar {
    width: 10px;
}

.links-popup-list::-webkit-scrollbar-track {
    background: var(--panel);
    border-radius: 8px;
}

.links-popup-list::-webkit-scrollbar-thumb {
    background: #243540;
    border-radius: 8px;
    border: 2px solid var(--panel);
}

.links-popup-list::-webkit-scrollbar-thumb:hover {
    background: #2f4656;
}

.links-popup-item {
    border-radius: 8px;
    margin: 2px 0;
}

.links-popup-item a {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 4px;
    padding: 8px 10px;
    color: var(--text);
    text-decoration: none;
    font-size: .9rem;
    border-radius: 8px;
    width: 100%;
}

.links-popup-item a:hover, .links-popup-item a:focus {
    background: rgba(77, 181, 255, 0.08);
    /* color: #e9fbff; */
    outline: none;
}

.links-popup-item .link-label {
    display: block;
    font-weight: 600;
    max-width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.links-popup-item .link-url {
    display: block;
    color: var(--text-dim);
    font-size: .75rem;
    margin-top: 2px;
    max-width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.links-popup-item .link-date {
    display: block;
    color: var(--text-dim);
    font-size: .75rem;
    margin-top: 6px;
    max-width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* Touch device optimizations */
@media (hover: none) and (pointer: coarse) {
    /* No hover/tap visual effects on touch to keep things smooth */
}

/* Medium screens (900–1050px): keep two columns; scale cards up a bit */
@media (min-width: 900px) and (max-width: 1050px) {
    .coverflow-group {
        gap: 24px;
        padding-right: 24px;
    }

    .coverflow-card {
        width: 220px;
        height: 300px;
    }
}

/* Reduced motion accessibility */
@media (prefers-reduced-motion: reduce) {
    .coverflow-cards {
        animation: none;
    }
}

.widgets {
    display: grid;
    gap: 1rem;
    margin-top: .25rem;
    grid-template-columns: 1fr;
    max-width: 100%;
    width: 100%;
}

.widget {
    background: var(--panel);
    border: 1px solid var(--panel-edge);
    padding: 1rem;
    border-radius: var(--radius);
    height: 160px;
    /* Fixed height */
    display: flex;
    flex-direction: column;
    gap: .5rem;
    position: relative;
    transition: all 0.3s ease;
    overflow: hidden;
}

/* Gradient fade at bottom of widget */
.widget::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 2em;
    background: linear-gradient(rgba(18, 29, 37, 0) 0%, var(--panel) 70%);
    pointer-events: none;
    border-radius: 0 0 var(--radius) var(--radius);
}

.widget:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px var(--shadow-widget);
}

.widget-ring-active {
    border-color: var(--accent) !important;
    box-shadow: 0 0 0 2px rgba(77, 181, 255, 0.3), 0 8px 25px rgba(77, 181, 255, 0.15) !important;
    animation: widget-ring-pulse 2s ease-in-out infinite;
}

@keyframes widget-ring-pulse {
    0%, 100% {
        box-shadow: 0 0 0 2px rgba(77, 181, 255, 0.3), 0 8px 25px rgba(77, 181, 255, 0.15);
    }

    50% {
        box-shadow: 0 0 0 4px rgba(77, 181, 255, 0.2), 0 8px 25px rgba(77, 181, 255, 0.25);
    }
}

.widget.expanded {
    min-height: auto;
}

.widget-link {
    color: inherit;
    text-decoration: none;
    display: block;
    width: 100%;
    height: 100%;
    cursor: pointer;
}

.widget h4 {
    margin: 0;
    font-size: .8rem;
    font-weight: 600;
    letter-spacing: .05em;
    text-transform: uppercase;
    color: var(--text-dim);
}

.widget p {
    margin: 0;
    font-size: .83rem;
    line-height: 1.4;
}

.widget-layout {
    display: flex;
    gap: 1rem;
    align-items: flex-start;
}

.widget-content {
    flex: 1;
    min-width: 0;
    overflow: hidden;
}

.widget-image {
    flex-shrink: 0;
    width: 100px;
    height: 100px;
    border-radius: var(--radius);
    overflow: hidden;
}

.widget-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

.widget-title {
    margin: 0 0 .5rem 0;
    font-size: .95rem;
    font-weight: 600;
    line-height: 1.3;
    color: var(--text);
    transition: color 0.2s ease;
}

.widget-link:hover .widget-title {
    color: var(--accent);
}

.widget-excerpt {
    margin: 0;
    font-size: .8rem;
    line-height: 1.4;
    color: var(--text-dim);
    overflow: hidden;
    word-wrap: break-word;
}

.widget-excerpt-container {
    overflow: hidden;
    flex: 1;
}

.widget-excerpt span {
    display: inline;
}

/* Mobile-specific styles */
@media (max-width: 768px) {
    .widget-link {
        cursor: pointer;
        -webkit-tap-highlight-color: transparent;
    }

    .widget {
        transition: all 0.3s ease, min-height 0.3s ease;
    }
}

/* Scroll button */
.scroll-more {
    position: absolute;
    bottom: 1.25rem;
    left: 50%;
    background: var(--scroll-bg);
    color: var(--text);
    border: 1px solid var(--panel-edge);
    border-radius: 50%;
    width: 46px;
    height: 46px;
    display: grid;
    place-items: center;
    font-size: 1.1rem;
    cursor: pointer;
    opacity: 1;
    visibility: visible;
    transform: translateX(-50%) translateY(0);
    transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
}

.scroll-more.hidden {
    opacity: 0;
    visibility: hidden;
    transform: translateX(-50%) translateY(10px);
}

.scroll-more:hover {
    background: var(--scroll-bg-hover);
}

/* Theme toggle */
.theme-toggle {
    position: fixed;
    top: 1rem;
    right: 1rem;
    background: var(--panel);
    color: var(--text);
    border: 1px solid var(--panel-edge);
    border-radius: 50%;
    width: 46px;
    height: 46px;
    display: grid;
    place-items: center;
    font-size: 1.1rem;
    cursor: pointer;
    z-index: 1000;
    transition: var(--transition);
}

.theme-toggle:hover {
    background: var(--panel-edge);
    transform: scale(1.05);
}

.theme-toggle:active {
    transform: scale(0.95);
}

/* Tabs section */
.content {
    padding: 0 clamp(1.25rem, 4vw, 3.5rem) 5rem;
    max-width: 1400px;
    margin: 0 auto;
}

.tabs {
    margin-top: 3rem;
}

.tab-bar {
    display: inline-flex;
    background: var(--panel);
    border: 1px solid var(--panel-edge);
    padding: .4rem;
    border-radius: 1000px;
    gap: .25rem;
    position: sticky;
    top: .75rem;
    z-index: 5;
    backdrop-filter: blur(12px);
}

.tab {
    appearance: none;
    border: 0;
    background: transparent;
    color: var(--text-dim);
    padding: 0.5rem;
    font-size: .8rem;
    font-weight: 600;
    border-radius: 1000px;
    cursor: pointer;
    letter-spacing: .5px;
    position: relative;
    transition: var(--transition);
}

.tab.active {
    background: #1c2a33;
    color: var(--text);
    box-shadow: 0 0 0 1px #243540;
}

.tab:not(.active):hover {
    color: var(--text);
}

.tab-panels {
    margin-top: 1.75rem;
}

/* Reserve scrollbar gutter so it remains present when panels toggle */
.tab-panels {
    /* Keep a stable gutter so layout doesn't shift and the scrollbar area stays visible */
    scrollbar-gutter: stable both-edges;
    /* WebKit doesn't support scrollbar-gutter, offer a hint (ignored by most browsers) */
    -webkit-scrollbar-gutter: stable;
}

/* Make sure the WebKit scrollbar visuals remain visible (when overflow exists) */
.tab-panels::-webkit-scrollbar {
    width: 10px;
    /* explicit width to avoid overlay behavior */
    background: var(--scroll-bg);
    opacity: 1 !important;
}

.tab-panels::-webkit-scrollbar-thumb {
    background: #243540;
    border-radius: 10px;
    border: 2px solid #121d25;
    opacity: 1 !important;
}

.tab-panel {
    display: none;
    animation: fade .4s ease forwards;
}

.tab-panel.active {
    display: block;
}

/* New tab layout with highlight image */
.tab-layout {
    display: grid;
    grid-template-columns: minmax(0, 1fr) min(380px, 30vw);
    /* Explicit areas so ordering is predictable */
    grid-template-areas: "panels highlight";
    gap: 2rem;
    align-items: start;
}

/* Assign grid areas */
.tab-panels {
    grid-area: panels;
}

.tab-highlight {
    grid-area: highlight;
}

@media (max-width:1050px) {
    .tab-layout {
        grid-template-columns: minmax(0, 1fr) min(320px, 35vw);
    }
}

@media (max-width:900px) {
    .tab-layout {
        grid-template-columns: 1fr;
        grid-template-areas:
            "panels"
            "highlight";
    }
}

@media (max-width:480px) {
    .tab-layout {
        gap: 1rem;
    }
}

/* Scroll constraint */
.tab-panels {
    max-height: 70vh;
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: #243540 #121d25;
    padding-right: .3rem;
    /* room for custom scrollbar */
}

.tab-panels::-webkit-scrollbar {
    width: 10px;
}

.tab-panels::-webkit-scrollbar-track {
    background: #121d25;
    border-radius: 10px;
}

.tab-panels::-webkit-scrollbar-thumb {
    background: #243540;
    border-radius: 10px;
    border: 2px solid #121d25;
}

.tab-panels::-webkit-scrollbar-thumb:hover {
    background: #2f4656;
}

/* Ensure vertical scrollbar is always visible for tab panels */
.tab-panels {
    overflow-y: scroll;
    /* Enable vertical scrolling */
    scrollbar-width: auto;
    /* For Firefox: show scrollbar */
    -ms-overflow-style: auto;
    /* For IE/Edge: show scrollbar */
}

/* For Webkit browsers (Chrome, Safari, etc.) */
.tab-panels::-webkit-scrollbar {
    display: block;
    /* Always show scrollbar */
}

/* Prevent scrollbar from hiding when not interacting */
.tab-panels {
    -webkit-overflow-scrolling: touch;
    /* Smooth scrolling for mobile */
    overflow-y: scroll;
    /* Always show scrollbar */
}

.tab-highlight {
    position: sticky;
    top: 5.5rem;
    /* below sticky tab bar */
    align-self: start;
}

@media (max-width:900px) {
    .tab-highlight {
        position: static;
        top: auto;
        margin-top: 1rem;
        max-width: 500px;
        margin-left: auto;
        margin-right: auto;
    }
}

.tab-highlight-figure {
    margin: 0;
    background: var(--panel);
    border: 1px solid var(--panel-edge);
    border-radius: calc(var(--radius) - 6px);
    padding: .75rem;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 300px;
    box-shadow: 0 10px 30px -15px #000;
    overflow: hidden;
}

.tab-highlight-figure img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: calc(var(--radius) - 10px);
    opacity: 0;
    /* Initial slight scale for load-in animation; JS tilt will control transform afterwards */
    transform: scale(1.04);
    /* Remove long transform transition (was 1.2s) which caused lag / fight with JS tilt */
    transition: opacity .5s ease;
    will-change: transform;
}

/* 3D tilt helper styles */
.tilt-origin {
    perspective: 1100px;
    transform-style: preserve-3d;
}

.tilt-inner {
    transform-style: preserve-3d;
    backface-visibility: hidden;
}

@media (prefers-reduced-motion:reduce) {
    .tilt-inner, .tilt-origin {
        perspective: none;
    }
}

.tab-highlight-figure img.ready {
    opacity: 1;
    transform: scale(1);
}

@media (max-width:600px) {
    .tab-panels {
        max-height: 70vh;
        /* Keep scroll constraint on mobile */
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
        /* smooth momentum */
    }

    .tab-highlight-figure {
        min-height: 220px;
    }
}

@keyframes fade {
    from {
        opacity: 0;
        translate: 0 8px;
    }

    to {
        opacity: 1;
        translate: 0 0;
    }
}

.cards {
    list-style: none;
    margin: 0;
    padding: 0;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 1rem;
}

.card {
    background: rgba(77, 181, 255, 0.01);
    border: 1px solid var(--panel-edge);
    padding: 1.1rem 1.05rem 1.2rem;
    border-radius: calc(var(--radius) - 6px);
    display: flex;
    flex-direction: column;
    gap: .55rem;
    position: relative;
    overflow: hidden;
    transition: all var(--transition);
}

.card[style*="cursor: pointer"]:hover {
    background: rgba(77, 181, 255, 0.1);
    border-color: rgba(77, 181, 255, 0.3);
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(77, 181, 255, 0.15);
}

.card[style*="cursor: pointer"]:hover h3 {
    color: var(--accent);
}

.card h3 {
    margin: 0;
    font-size: 1rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: .5rem;
    transition: color var(--transition);
}

.dot {
    display: inline-block;
    width: .55rem;
    height: .55rem;
    border-radius: 50%;
    background: #2e4452;
}

.dot.live {
    background: #3ddc97;
    box-shadow: 0 0 0 4px #3ddc9722, 0 0 0 8px #3ddc970f;
}

.card p {
    margin: 0;
    font-size: .8rem;
    line-height: 1.45;
    color: var(--text-dim);
}

.tags {
    display: flex;
    flex-wrap: wrap;
    gap: .35rem;
    margin-top: auto;
}

.tags span {
    background: #1c2a33;
    border: 1px solid #283a46;
    color: var(--text-dim);
    padding: .25rem .55rem;
    font-size: .65rem;
    border-radius: 8px;
    font-weight: 500;
    letter-spacing: .5px;
}

/* Project card gold/silver highlighting (mirror timeline aesthetics) */
.card.gold-highlight {
    /* Keep the card layout spacing consistent with other cards */
    margin: 0;
    /* override generic .gold-highlight negative margins */
    padding: 1.1rem 1.05rem 1.2rem;
    border-radius: calc(var(--radius) - 6px);
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.08) 0%, rgba(255, 193, 7, 0.04) 100%);
    border: 1px solid rgba(255, 215, 0, 0.12);
    box-shadow: 0 6px 20px rgba(255, 215, 0, 0.04);
}

.card.gold-highlight h3 {
    color: rgba(255, 215, 0, 0.9);
    text-shadow: 0 0 6px rgba(255, 215, 0, 0.12);
}

.card.gold-highlight:hover {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.12) 0%, rgba(255, 193, 7, 0.08) 100%);
    border-color: rgba(255, 215, 0, 0.25);
}

.card.silver-highlight {
    margin: 0;
    /* override generic .silver-highlight negative margins */
    padding: 1.1rem 1.05rem 1.2rem;
    border-radius: calc(var(--radius) - 6px);
    background: linear-gradient(135deg, rgba(192, 192, 192, 0.08) 0%, rgba(169, 169, 169, 0.04) 100%);
    border: 1px solid rgba(192, 192, 192, 0.12);
    box-shadow: 0 6px 20px rgba(192, 192, 192, 0.03);
}

.card.silver-highlight h3 {
    color: rgba(192, 192, 192, 0.95);
    text-shadow: 0 0 6px rgba(192, 192, 192, 0.08);
}

.card.silver-highlight:hover {
    background: linear-gradient(135deg, rgba(192, 192, 192, 0.12) 0%, rgba(169, 169, 169, 0.08) 100%);
    border-color: rgba(192, 192, 192, 0.25);
}

/* Timeline */
.timeline {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: 2rem;
    position: relative;
    padding-left: 1rem;
    max-width: 100%;
    overflow: hidden;
    /* small breathing room on left */
    --time-w: 80px;
    --gap: 1.5rem;
    --dot-size: 12px;
}

.timeline::before {
    content: "";
    position: absolute;
    /* vertical line sits between time column and entry; center = time width + half gap */
    left: calc(var(--time-w) + var(--gap) / 2);
    top: 0;
    bottom: 0;
    width: 2px;
    background: var(--timeline-gradient);
    border-radius: 1px;
}

.timeline li {
    display: grid;
    grid-template-columns: var(--time-w) 1fr;
    gap: var(--gap);
    position: relative;
    transition: all var(--transition);
    border-radius: 12px;
    padding: 0.5rem;
    margin: -0.5rem;
}

.timeline li[style*="cursor: pointer"]:hover {
    background: rgba(77, 181, 255, 0.04);
    transform: translateX(4px);
    box-shadow: 0 4px 20px rgba(77, 181, 255, 0.1);
}

.timeline li[style*="cursor: pointer"]:hover .timeline-dot {
    background: var(--accent);
    box-shadow: 0 0 0 6px #4db5ff35, 0 0 12px #4db5ff55;
    transform: scale(1.2);
}

.timeline li::after {
    content: "";
    position: absolute;
    /* center dot over vertical line */
    /* Use translate to perfectly center including border (previous calc ignored 2px border) */
    left: calc(var(--time-w) + var(--gap) / 2 - var(--dot-size) / 2);
    top: 0.75rem;
    width: var(--dot-size);
    height: var(--dot-size);
    background: var(--accent);
    border-radius: 50%;
    box-shadow: 0 0 0 4px #4db5ff25;
    transition: all var(--transition);
    z-index: 2;
    border: 2px solid #060809;
    /* Center dot; extra -1px compensates for line width / subpixel rendering */
    transform: translateX(calc(-50% - 1px));
}

.timeline li[style*="cursor: pointer"]:hover::after {
    background: var(--accent);
    box-shadow: 0 0 0 6px #4db5ff35, 0 0 12px #4db5ff55;
    /* Preserve centering while scaling */
    transform: translateX(calc(-50% - 1px)) scale(1.2);
}

.timeline .time {
    font-size: .7rem;
    font-family: monospace;
    font-weight: 600;
    letter-spacing: .08em;
    text-transform: uppercase;
    color: var(--text-dim);
    text-align: left;
    padding-top: .4rem;
    white-space: nowrap;
}

.timeline .entry {
    padding-top: .1rem;
    min-width: 0;
    overflow: hidden;
}

.timeline h4 {
    margin: 0 0 .4rem;
    font-size: .95rem;
    font-weight: 600;
    transition: color var(--transition);
}

.timeline li[style*="cursor: pointer"]:hover h4 {
    color: var(--accent);
}

.timeline p {
    margin: 0;
    font-size: .78rem;
    line-height: 1.45;
    color: var(--text-dim);
}

.timeline-images {
    display: flex;
    gap: 8px;
    margin: 0.5rem 0;
}

.timeline-thumb {
    width: 56px;
    height: 40px;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-color: var(--panel);
    border-radius: 6px;
    border: 1px solid var(--border-light);
    padding: 0;
    cursor: pointer;
}

.timeline-thumb:focus {
    outline: 2px solid var(--border-accent);
}

/* Fullscreen image viewer caption */
#_img_viewer_caption {
    color: var(--text-dim);
    font-size: 0.95rem;
    margin-top: 0.5rem;
}

/* Fullscreen viewer container + nav */
._img_viewer {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(6, 8, 9, 0.95);
    z-index: 99999;
}

._img_viewer .viewer-inner {
    max-width: 95%;
    text-align: center;
}

._img_viewer img#_img_viewer_img {
    max-width: 100%;
    max-height: 80vh;
    border-radius: 8px;
    box-shadow: 0 6px 30px var(--shadow-dark-strong);
    display: block;
}

.viewer-nav {
    background: transparent;
    border: none;
    color: var(--text);
    font-size: 2.6rem;
    width: 64px;
    height: 64px;
    display: grid;
    place-items: center;
    cursor: pointer;
    opacity: 0.9;
}

.viewer-nav:focus {
    outline: 2px solid var(--border-accent);
}

.viewer-prev {
    margin-right: 1rem;
}

.viewer-next {
    margin-left: 1rem;
}

/* spinner inside viewer */
.viewer-media {
    position: relative;
    display: inline-block;
}

.viewer-spinner {
    position: absolute;
    left: 50%;
    top: 50%;
    width: 36px;
    height: 36px;
    margin-left: -18px;
    margin-top: -18px;
    border-radius: 50%;
    border: 3px solid var(--border-light);
    border-top-color: var(--accent);
    animation: viewer-spin 1s linear infinite;
    display: none;
}

@keyframes viewer-spin {
    to {
        transform: rotate(360deg);
    }
}

/* position indicator */
.viewer-pos {
    color: var(--text-dim);
    font-size: .9rem;
    margin-top: .4rem;
}

.from-line {
    margin: 0 0 .35rem 0;
    font-size: .63rem;
    letter-spacing: .08em;
    text-transform: uppercase;
    font-weight: 600;
    color: #768a98;
    /* opacity: .9; */
}

/* Timeline group styles */
.timeline-summary {
    display: flex;
    align-items: center;
    margin: 0;
    font-size: .85rem;
    line-height: 1.3;
    font-weight: 600;
    color: var(--text);
    cursor: pointer;
    transition: var(--transition);
}

.timeline-summary:hover {
    color: var(--accent);
}

.timeline-summary span {
    flex: 1;
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.timeline-toggle {
    background: none;
    border: none;
    color: var(--text-dim);
    cursor: pointer;
    padding: 0.25rem;
    margin-right: 0.5rem;
    transition: var(--transition);
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.timeline-toggle:hover {
    color: var(--accent);
    background: rgba(77, 181, 255, 0.1);
}

.timeline-toggle i {
    transition: transform 0.2s ease;
    font-size: 0.7rem;
}

.timeline-items {
    margin-top: 0.75rem;
    padding-left: 1rem;
    border-left: 2px solid var(--panel-edge);
    animation: expandItems 0.3s ease-out;
}

@keyframes expandItems {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.timeline-item {
    padding: 0.75rem 0;
    border-bottom: 1px solid rgba(47, 70, 86, 0.3);
    transition: var(--transition);
}

.timeline-item:last-child {
    border-bottom: none;
}

.timeline-item:hover {
    background: rgba(77, 181, 255, 0.03);
    margin: 0 -0.5rem;
    padding-left: 0.5rem;
    padding-right: 0.5rem;
    border-radius: 8px;
}

.timeline-item h5 {
    margin: 0 0 0.25rem 0;
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--text);
    line-height: 1.3;
}

.timeline-item:hover h5 {
    color: var(--accent);
}

.timeline-item p {
    margin: 0.25rem 0;
    font-size: 0.74rem;
    line-height: 1.4;
    color: var(--text-dim);
}

.timeline-item .from-line {
    margin: 0.15rem 0 0.25rem 0;
    font-size: 0.6rem;
}

.timeline-item .tags {
    margin-top: 0.5rem;
}

/* Gold highlighting for prestigious awards */
.gold-highlight {
    position: relative;
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.08) 0%, rgba(255, 193, 7, 0.05) 100%);
    border: 1px solid rgba(255, 215, 0, 0.15);
    border-radius: 8px;
    padding: 0.75rem;
    margin: 0 -0.5rem;
}

.gold-highlight::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, rgba(255, 215, 0, 0.6) 0%, rgba(255, 193, 7, 0.3) 100%);
    border-radius: 8px 8px 0 0;
}

.timeline-item.gold-highlight {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.06) 0%, rgba(255, 193, 7, 0.03) 100%);
    border: 1px solid rgba(255, 215, 0, 0.12);
    border-radius: 8px;
    padding: 0.75rem;
    margin: 0 -0.5rem;
}

.timeline-item.gold-highlight::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, rgba(255, 215, 0, 0.5) 0%, rgba(255, 193, 7, 0.25) 100%);
    border-radius: 8px 8px 0 0;
}

.gold-highlight h4,
.timeline-item.gold-highlight h5 {
    color: rgba(255, 215, 0, 0.9);
    text-shadow: 0 0 8px rgba(255, 215, 0, 0.2);
}

.gold-highlight h4 {
    padding-top: 0.4rem;
}

.gold-highlight:hover,
.timeline-item.gold-highlight:hover {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.12) 0%, rgba(255, 193, 7, 0.08) 100%);
    border-color: rgba(255, 215, 0, 0.25);
    box-shadow: 0 4px 20px rgba(255, 215, 0, 0.1);
}

/* Silver highlighting for notable awards */
.silver-highlight {
    position: relative;
    background: linear-gradient(135deg, rgba(192, 192, 192, 0.08) 0%, rgba(169, 169, 169, 0.05) 100%);
    border: 1px solid rgba(192, 192, 192, 0.15);
    border-radius: 8px;
    padding: 0.75rem;
    margin: 0 -0.5rem;
}

.silver-highlight::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, rgba(192, 192, 192, 0.6) 0%, rgba(169, 169, 169, 0.3) 100%);
    border-radius: 8px 8px 0 0;
}

.timeline-item.silver-highlight {
    background: linear-gradient(135deg, rgba(192, 192, 192, 0.06) 0%, rgba(169, 169, 169, 0.03) 100%);
    border: 1px solid rgba(192, 192, 192, 0.12);
    border-radius: 8px;
    padding: 0.75rem;
    margin: 0 -0.5rem;
}

.timeline-item.silver-highlight::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, rgba(192, 192, 192, 0.5) 0%, rgba(169, 169, 169, 0.25) 100%);
    border-radius: 8px 8px 0 0;
}

.silver-highlight h4,
.timeline-item.silver-highlight h5 {
    color: rgba(192, 192, 192, 0.9);
    text-shadow: 0 0 8px rgba(192, 192, 192, 0.15);
}

.silver-highlight h4 {
    padding-top: 0.4rem;
}

.silver-highlight:hover,
.timeline-item.silver-highlight:hover {
    background: linear-gradient(135deg, rgba(192, 192, 192, 0.12) 0%, rgba(169, 169, 169, 0.08) 100%);
    border-color: rgba(192, 192, 192, 0.25);
    box-shadow: 0 4px 20px rgba(192, 192, 192, 0.08);
}

/* Category-level highlighting */
.timeline-group.category-gold .timeline-summary {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.06) 0%, rgba(255, 193, 7, 0.03) 100%);
    border: 1px solid rgba(255, 215, 0, 0.12);
    border-radius: 8px;
    padding: 0.5rem 0.75rem;
    margin: 0 -0.5rem;
    position: relative;
}

.timeline-group.category-gold .timeline-summary::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, rgba(255, 215, 0, 0.4) 0%, rgba(255, 193, 7, 0.2) 100%);
    border-radius: 8px 8px 0 0;
}

.timeline-group.category-silver .timeline-summary {
    background: linear-gradient(135deg, rgba(192, 192, 192, 0.06) 0%, rgba(169, 169, 169, 0.03) 100%);
    border: 1px solid rgba(192, 192, 192, 0.12);
    border-radius: 8px;
    padding: 0.5rem 0.75rem;
    margin: 0 -0.5rem;
    position: relative;
}

.timeline-group.category-silver .timeline-summary::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, rgba(192, 192, 192, 0.4) 0%, rgba(169, 169, 169, 0.2) 100%);
    border-radius: 8px 8px 0 0;
}

.project-date {
    color: #879eac;
    font-weight: 500;
}

/* Tag style reuse for awards timeline */
.badge[class*="tag-"] {
    background: #21313b;
    border-color: #2e4654;
}

/* Specific tag color accents */
.badge.tag-academic {
    background: #1e2b3a;
    border-color: #2e4760;
    color: #9ab9d1;
}

.badge.tag-math {
    background: #2a253d;
    border-color: #413764;
    color: #c5b7ff;
}

.badge.tag-science {
    background: #1f2f2a;
    border-color: #335447;
    color: #a7e8cc;
}

.badge.tag-physics {
    background: #242e40;
    border-color: #3a4d6a;
    color: #b3d5ff;
}

.badge.tag-chemistry {
    background: #2e2a24;
    border-color: #514637;
    color: #ffddad;
}

.badge.tag-language {
    background: #352538;
    border-color: #56385c;
    color: #e9b7f8;
}

.badge.tag-service {
    background: #2d2a1f;
    border-color: #4e4736;
    color: #f5e0a3;
}

.badge.tag-hackathon {
    background: #2b2335;
    border-color: #473b5a;
    color: #d9b7ff;
}

.badge.tag-ai {
    background: #152f3d;
    border-color: #235067;
    color: #8fd8ff;
}

.badge.tag-contest {
    background: #312a1f;
    border-color: #5a4731;
    color: #ffcc91;
}

.badge.tag-grant {
    background: #262f1f;
    border-color: #425a34;
    color: #c3ef9d;
}

.badge.tag-programming {
    background: #1d2d3a;
    border-color: #2f4a60;
    color: #9cc9e8;
}

.badge.tag-citizenship {
    background: #2d2222;
    border-color: #523737;
    color: #f4b5b5;
}

.badge.tag-socialstudies {
    background: #2e2c20;
    border-color: #545238;
    color: #f5e9a8;
}

.badge.tag-ap {
    background: #282e3c;
    border-color: #425068;
    color: #b8d3f0;
}

.badge {
    display: inline-block;
    font-size: .6rem;
    padding: .25rem .5rem;
    background: #1e2c35;
    border: 1px solid #29414e;
    color: var(--text-dim);
    border-radius: 6px;
    margin-top: .5rem;
    font-weight: 600;
    letter-spacing: .5px;
}

.badge.winner {
    color: #ffd86b;
    border-color: #5a4615;
    background: #3a2d08;
}

.badge.inperson {
    color: #8fd8ff;
    border-color: #1e4860;
    background: #0e303f;
}

/* Footer */
.site-footer {
    text-align: center;
    padding: 2.5rem 1rem 3rem;
    font-size: .7rem;
    color: var(--footer-color);
}

.site-footer p {
    margin: 0;
}

.site-footer a {
    color: var(--text-dim);
    font-weight: 500;
    text-decoration: none;
    transition: var(--transition);
    border-bottom: 1px solid rgba(77, 181, 255, 0.25);
}

.site-footer a:hover, .site-footer a:focus-visible {
    background-color: rgba(77, 181, 255, 0.1);
    color: #a9d9ff;
    border-bottom-color: rgba(77, 181, 255, 0.5);
}

/* Animations / utilities */

/* Brief visual highlight used when navigating to an item */
.nav-highlight {
    position: relative;
    border-radius: 12px;
    z-index: 2;
    /* sit above neighbors briefly */
    animation: navHighlight 5000ms cubic-bezier(.2, .8, .2, 1);
}

@keyframes navHighlight {
    0% {
        box-shadow: 0 0 0 0 rgba(77, 181, 255, 0);
    }

    10% {
        box-shadow: 0 8px 28px -10px rgba(77, 181, 255, 0.45), 0 0 0 6px rgba(77, 181, 255, 0.12);
    }

    60% {
        box-shadow: 0 6px 18px -12px rgba(77, 181, 255, 0.18), 0 0 0 2px rgba(77, 181, 255, 0.06);
    }

    100% {
        box-shadow: 0 0 0 0 rgba(77, 181, 255, 0);
    }
}

.glow {
    box-shadow: 0 0 0 1px #2b4b5f, 0 0 0 3px #2b4b5f55, 0 0 24px -4px #4db5ff44;
}

.linkedin-highlight {
    background: var(--dark-accent) !important;
    border-color: #4db5ff !important;
    color: var(--text) !important;
}

.pulse {
    animation: pulse 2.4s ease-in-out infinite;
}

@keyframes pulse {
    0%, 100% {
        box-shadow: 0 0 0 0 #4db5ff55;
    }

    50% {
        box-shadow: 0 0 0 12px #4db5ff00;
    }
}

/* Responsive adjustments */
@media (max-width:900px) {
    .hero-inner {
        grid-template-columns: 1fr;
    }

    .portrait {
        width: min(300px, 70vw);
    }

    .tab-bar {
        position: static;
    }
}

@media (max-width:768px) {

    /* Timeline tablet adjustments */
    .timeline {
        --time-w: 75px;
        --gap: 1.3rem;
    }
}

@media (max-width:600px) {
    .site-title {
        font-size: clamp(1.6rem, 9vw, 2.8rem);
    }

    .connections {
        padding: 0.75rem;
    }

    .connections a span {
        display: none;
    }

    /* icons only on very small */
    .connections a {
        font-size: 0.9rem;
        padding: 0.8rem 0.6rem;
    }

    /* Timeline mobile adjustments */
    .timeline {
        padding-left: 0.5rem;
        --time-w: 60px;
        --gap: 1.2rem;
        --dot-size: 10px;
    }

    .timeline .time {
        font-size: .65rem;
        text-align: right;
        padding-top: 1.5rem;
    }

    .timeline li[style*="cursor: pointer"]:hover {
        transform: translateX(2px);
    }

    .cards {
        grid-template-columns: 1fr;
    }

    /* Cover Flow mobile adjustments */
    .coverflow-container {
        width: min(400px, 95vw);
        height: min(250px, 60vw);
    }

    .coverflow-cards li {
        width: 170px;
        height: 210px;
        margin: 0 15px;
    }

    .coverflow-cards li img {
        -webkit-box-reflect: below 0.2em linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.2));
    }
}

@media (max-width:768px) {

    /* Cover Flow tablet adjustments */
    .coverflow-container {
        width: min(500px, 90vw);
        height: min(300px, 65vw);
    }

    .coverflow-cards li {
        width: 200px;
        height: 250px;
        margin: 0 20px;
    }
}

/* Reduced motion */
@media (prefers-reduced-motion:reduce) {
    * {
        animation-duration: .01ms !important;
        animation-iteration-count: 1 !important;
        transition: none !important;
    }

    /* Disable hover effects for Cover Flow cards */
    .coverflow-cards li:hover {
        transform: none !important;
    }
}

.social-svg {
    max-width: 1rem;
    max-height: 1rem;
    fill: currentColor;
}

/* --- Tilt interaction fixes -------------------------------------------------
   The JS tilt script applies rapid transform updates via requestAnimationFrame.
   Any CSS transform transition on the same element causes sluggish or jittery
   movement (browser tries to animate between every frame). We explicitly
   remove transform transitions on tilt targets while keeping other transitions.
*/
.tilt-inner {
    transition: none !important;
    /* ensure immediate response to JS-driven transforms */
    will-change: transform;
}

/* Preserve opacity transition for highlight image while stripping transform anim */
.tab-highlight-figure img.tilt-inner {
    transition: opacity .5s ease !important;
}

/* --- Light-mode UI fixes (contrast tweaks requested) ---------------------- */
/* These selectively override a few component colors so the beige background
   remains warm while controls and highlights stay readable. */

/* Selected tab pill: make it visually prominent on the light background */
[data-theme="light"] .tab.active {
    background: var(--accent);
    /* blue accent */
    color: #ffffff;
    /* clear readable text */
    box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.06);
}

/* Tags: in light theme, only change non-badge spans to a subtle light-gray
   so that colored badges (.badge.tag-*) keep their specific colors. */
[data-theme="light"] .tags span:not(.badge),
[data-theme="light"] .timeline-item .tags span:not(.badge) {
    background: rgba(0, 0, 0, 0.04);
    /* subtle light gray */
    border: 1px solid rgba(0, 0, 0, 0.045);
    color: var(--text-dim);
}

/* Base badge appearance in light mode (so unthemed badges aren't dark). */
[data-theme="light"] .badge {
    background: rgba(0, 0, 0, 0.04);
    border: 1px solid rgba(0, 0, 0, 0.06);
    color: var(--text-dim);
}

/* Gold highlights: use a warmer, darker gold for text on beige */
[data-theme="light"] .card.gold-highlight h3,
[data-theme="light"] .gold-highlight h4,
[data-theme="light"] .timeline-item.gold-highlight h5 {
    color: #b38600;
    /* darker gold for readability */
    text-shadow: none;
}

[data-theme="light"] .card.gold-highlight {
    background: linear-gradient(135deg, #fff7e0 0%, #fff3d6 100%);
    border: 1px solid rgba(179, 134, 0, 0.12);
    box-shadow: 0 6px 20px rgba(179, 134, 0, 0.05);
}

/* Silver highlights: make text and background more visibly 'silver' */
[data-theme="light"] .card.silver-highlight h3,
[data-theme="light"] .silver-highlight h4,
[data-theme="light"] .timeline-item.silver-highlight h5 {
    color: #505050;
    /* darker neutral for contrast */
    text-shadow: none;
}

[data-theme="light"] .card.silver-highlight {
    background: linear-gradient(135deg, #f0f0f0 0%, #e2e2e2 100%);
    border: 1px solid rgba(120, 120, 120, 0.18);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.04);
}

[data-theme="light"] .silver-highlight,
[data-theme="light"] .timeline-item.silver-highlight,
[data-theme="light"] .timeline-group.category-silver .timeline-summary {
    background: linear-gradient(135deg, #f2f2f2 0%, #e6e6e6 100%);
    border: 1px solid rgba(120, 120, 120, 0.14);
}

/* --- Scrollable tab-bar (Option A) ------------------------------------------------- */
/* Wrapper that holds the tab bar and optional scroll buttons */
.tab-scroll-wrap {
    display: flex;
    align-items: center;
    gap: .5rem;
    position: relative;
    width: 100%;
}

/* Make the tab bar horizontally scrollable while keeping pill layout */
.tab-scroll-wrap .tab-bar {
    display: flex;
    gap: .5rem;
    align-items: center;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
    padding-bottom: 4px;
    /* room for hidden scrollbar */
    scrollbar-width: thin;
}

/* Hide native scrollbar visually but keep it usable */
.tab-scroll-wrap .tab-bar::-webkit-scrollbar {
    height: 8px;
}

.tab-scroll-wrap .tab-bar::-webkit-scrollbar-track {
    background: transparent;
}

.tab-scroll-wrap .tab-bar::-webkit-scrollbar-thumb {
    background: linear-gradient(90deg, rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0.04));
    border-radius: 999px;
}

/* Keep each tab from flexing to fill space; allow truncation if needed */
.tab-scroll-wrap .tab {
    flex: 0 0 auto;
    white-space: nowrap;
    max-width: 14rem;
    text-overflow: ellipsis;
    overflow: hidden;
}

/* Subtle fade indicators (no buttons) */
.tab-scroll-fade {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 56px;
    pointer-events: none;
    transition: opacity var(--transition);
    opacity: 0;
}

.tab-scroll-fade.left {
    left: 0;
    background: linear-gradient(90deg, rgba(0, 0, 0, 0.30), transparent);
}

.tab-scroll-fade.right {
    right: 0;
    background: linear-gradient(-90deg, rgba(0, 0, 0, 0.30), transparent);
}

/* Show fades only on wrapper hover and when overflow exists (JS toggles can-scroll-* classes) */
.tab-scroll-wrap:hover .tab-scroll-fade {
    opacity: 1;
}

.tab-scroll-wrap.can-scroll-left .tab-scroll-fade.left {
    opacity: 1;
}

.tab-scroll-wrap.can-scroll-right .tab-scroll-fade.right {
    opacity: 1;
}

/* Ensure the tab bar doesn't shrink the layout in narrow contexts */
.tabs {
    width: 100%;
}

/* end scrollable tab-bar */